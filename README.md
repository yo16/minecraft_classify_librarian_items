# minecraft_classify_librarian_items
マイクラの司書の画像から、交換可能なアイテムを判定する

# 単体の機能
- 司書の取引ウィンドウが開かれているかどうか判定する
- 取引ウィンドウに表示されている２つのアイテムを判定する
- エンチャントの本の場合、その内容を判定する
    - OCRを使って調整してたけど、文字を何も検出しないことすらあるのでやめた
    - 機械学習で予測しようとしたけど、テストデータを集めるのが大変だったのでやめた
    - 文字をピクセル単位で見て、全タイトルを判定することにした
- エンチャントの本の場合、その価格を解読する
    - 数字部分をピクセル単位で見て、判定
        - 村人を叩いて価格が変動していても、元の金額を判定できる
- 読み取った内容をDBへ登録する


# これらの機能を使って、連続的に、判定して結果をDBへ登録する仕組みの流れ
1. 初期化
    1. 取引中フラグをfalseにする
2. スタート
    1. 0.1秒とか、ちょっと待つ？
3. 司書の取引ウィンドウが開かれているかどうか判定する
    1. 開かれていない場合
        1. 取引中フラグをfalseにする（前回の取引が終わったとみなす）
        2. スタートに戻る
3. 取引中フラグがtrueのとき（前回の取引ウィンドウが開いた状態のままになっている）
    1. スタートに戻る
4. 取引中フラグをtrueにする（一旦閉じて、新しいウィンドウが開いたと認識される）
5. 取引ウィンドウに表示されている２つのアイテムを判定する＜判定処理２＞
    1. 紙と本棚だけの場合は、その内容をDBに登録する
    2. スタートに戻る
6. エンチャントの本の場合、その内容を判定する＜判定処理３＞
    1. 紙 or 本棚と、エンチャントの本の内容を、DBに登録する
    2. スタートに戻る


# 開発用
- `./tools/makeStoreFile.py`
    - data_map.jsonを使って
    - キャプチャ画像からエンチャント本のタイトル部を取り出し、1次元配列のデータにする
    - 手でラベリングしたエンチャント本のタイトルを合わせて、dictにする
    - それらを集めて、`title_store.pkl`を作成する
- `./tools/determinEnchantTitleMethod.py`
    - `title_store.pkl`を使って、1次元配列たちを区別するピクセル座標値を見つける
    - 実際に判断する際に、ここで見つけた座標値を使って判定する
    - ここでは、if文のコードを標準出力で生成する
    - 作成した関数は、`./src/judgeTitle.py`に記載し、`./src/readEnchantTitle.py`から呼び出す
